<div *ngIf="isLoadingEditModel" class="mt-5">
  <simple-center-loader [height]="200"></simple-center-loader>
</div>
<div *ngIf="!isLoadingEditModel" class="mt-2">
  <form (submit)="submit($event)">
    <div class="d-flex align-items-center p-2">
      <button class="ml-auto btn-primary rounded" type="submit">Publish</button>
    </div>
    <div class="p-2">
      <input
        #titleInput
        [(ngModel)]="model.Title"
        name="blogTitle"
        type="text"
        placeholder="Headline..."
        class="mb-2 p-2 rounded font-weight-bold fs-24px border-light"
        autocomplete="off"
        autofocus="true"
      />
      <input
        [(ngModel)]="model.Description"
        name="blogTagline"
        type="text"
        placeholder="Description..."
        class="rounded border-light"
        autocomplete="off"
      />
    </div>
    <div class="p-2">
      <div
        (drop)="onDropImg($event)"
        (dragover)="onDragOver($event)"
        (dragenter)="onDragEnter($event)"
        (dragleave)="onDragLeave($event)"
        class="border rounded text-center d-flex justify-content-center align-items-center position-relative bg-light"
        [ngClass]="{ 'border-dotted': isDraggingFileOverDropZone }"
        tabindex="0"
        [ngStyle]="{
          height: '300px',
          width: '100%',
          overflow: 'hidden',
          border: isDraggingFileOverDropZone ? '3px dashed blue !important' : '',
          cursor: 'pointer'
        }"
      >
        <input #coverImgInput type="file" (change)="onFileSelected($event)" accept="image/*" hidden />
        <div *ngIf="coverImgSrc" class="position-absolute p-2" [ngStyle]="{ top: 0, right: 0 }">
          <button type="button" class="rounded mr-1" (click)="onClickSelectFile($event)">Change</button>
          <button type="button" class="rounded" (click)="onRemoveCoverImg($event)">Remove</button>
        </div>
        <img *ngIf="coverImgSrc" [src]="coverImgSrc" class="w-100" />
        <span *ngIf="!coverImgSrc">
          <p>Add a cover image that compliments your blog post.</p>
          <button type="button" (click)="onClickSelectFile($event)" class="rounded">Select File</button>
        </span>
      </div>
    </div>
  </form>
  <quill-editor
    [modules]="quillModules"
    [(ngModel)]="model.ContentDelta"
    format="object"
    [placeholder]="placeholder | transloco"
  ></quill-editor>
</div>
